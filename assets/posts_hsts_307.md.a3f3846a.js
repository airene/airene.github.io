import{o as e,c as t,f as r}from"./app.222ca5d5.js";const a='{"title":"hsts??,httpcode,302,303,307","description":"没见过hsts是个什么东东，用一个jsdelivr的接口,发现的307和响应header里面有hsts","frontmatter":{"date":"2021-09-17","title":"hsts??,httpcode,302,303,307","tags":["httpcode","hsts"],"description":"没见过hsts是个什么东东，用一个jsdelivr的接口,发现的307和响应header里面有hsts"},"headers":[{"level":2,"title":"3xx code","slug":"_3xx-code"},{"level":2,"title":"表现","slug":"表现"},{"level":2,"title":"nginx 如何开启","slug":"nginx-如何开启"},{"level":2,"title":"参考","slug":"参考"}],"relativePath":"posts/hsts_307.md","lastUpdated":1631851087160}',s={},o=[r('<h1 id="hsts是啥-httpcode-302-303-307"><a class="header-anchor" href="#hsts是啥-httpcode-302-303-307" aria-hidden="true">#</a> hsts是啥,httpcode,302,303,307</h1><h2 id="_3xx-code"><a class="header-anchor" href="#_3xx-code" aria-hidden="true">#</a> 3xx code</h2><ul><li>301 永久性跳转 http1.0</li><li>302 临时性跳转 http1.0</li><li>303 (补充302) 各浏览器按302处理 http1.1</li><li>307 (补充302) 基本没见过 在jsdelivr看到了 http1.1</li></ul><p>303,307的表现还和请求的幂等、非幂等有关,get,delete,put为幂等，post非幂等<br> 白话版，请求无法预知提交schema的作用，比如primarykey是否存在的情况下，通常意义上来讲前三个的副作用是固定的，post不是</p><h2 id="表现"><a class="header-anchor" href="#表现" aria-hidden="true">#</a> 表现</h2><p>本地文件按照<code>file://</code>或者webstorm的<code>localhost</code>不带https打开,请求自适应协议的get<code>//data.jsdelivr.com/v1/package/npm/xxx</code>,查看控制台发现先发了一个http get请求, 状态码:307,响应response headers:</p><div class="language-text"><pre><code>Access-Control-Allow-Credentials: true\nAccess-Control-Allow-Origin: http://localhost:63342\nLocation: https://data.jsdelivr.com/v1/package/npm/vue\nNon-Authoritative-Reason: HSTS\n</code></pre></div><p>再发一个https get到这个url到请求,并正常返回结果,<strong>浏览器自动完成</strong></p><h2 id="nginx-如何开启"><a class="header-anchor" href="#nginx-如何开启" aria-hidden="true">#</a> nginx 如何开启</h2><div class="language-text"><pre><code>add_header Strict-Transport-Security &quot;max-age=63072000; includeSubdomains; preload&quot;;\n</code></pre></div><h2 id="参考"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2><p><a href="https://hstspreload.org/" target="_blank" rel="noopener noreferrer">https://hstspreload.org/</a><br><a href="https://zhangzifan.com/hsts.html" target="_blank" rel="noopener noreferrer">https://zhangzifan.com/hsts.html</a><br><a href="https://chromium.googlesource.com/chromium/src/+/master/net/http/transport_security_state_static.json?format=TEXT" target="_blank" rel="noopener noreferrer">hsts list的列表(加密,好像是会随chrome的发布不断内置新版,已经到22M了)</a></p>',12)];s.render=function(r,a,s,h,d,l){return e(),t("div",null,o)};export{a as __pageData,s as default};
